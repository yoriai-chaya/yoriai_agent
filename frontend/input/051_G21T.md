# Header
- Category: GenCode
- BuildCheck: Off

# Body
Playwright用のフロントエンドアプリケーションのテストプログラムを作成します。

## テストプログラムの要求仕様

- テスト対象アプリケーション概要: Next.js, TypeScript, TailwindCSS, shadcn/uiにて作成したホーム画面
- 作成するテストプログラムファイル: tests/home_nav.spec.ts

## テスト対象アプリケーションファイル
{{file:app/page.tsx}}

## テスト対象URL
- "/"

## テストケース
テストケースとして以下の４ケースを作成する。

### テストグループ
- テストグループ名: "Home Navigation Test"

---

### 共通処理
以下の共通チェック処理を関数として定義する。

#### 共通関数
- 関数名: checkHomeBasicContents
- 引数: page: Page

#### 共通関数内の確認内容
- TestId="home-container"でロケータを取得
- コンテナが表示されていること(toBeVisible)
- "max-w-2xl"クラスが指定されていること(toHaveClass)
- "mx-auto"クラスが指定されていること(toHaveClass)

- TestId="home-hero-image"でロケータを取得
- imgタグがDOMにアタッチされていること(toBeAttached)

- TestId="home-title"でロケータを取得
- 以下のテキストが存在すること(toHaveText)

都会の静寂に包まれて、心ほどけるひとときを

- "text-center"クラスが指定されていること(toHaveClass)

- TestId="home-description"でロケータを取得
- 以下のテキストで始まる文字列が存在すること(toHaveText)

東京の中心にありながら、

---

### テストケース1
- テストケース名: "Navigation visibility by device"
- testInfo.project.name に "mobile" が含まれるかどうかでデバイス種別を判定する
- TestId="main-nav"でロケータを取得
- TestId="mobile-nav"でロケータを取得

#### モバイルの場合
- mobile-nav が表示されていること(toBeVisible)
- main-nav が非表示であること(toBeHidden)

#### PCの場合
- main-nav が表示されていること(toBeVisible)
- mobile-nav が非表示であること(toBeHidden)

---

### テストケース2
- テストケース名: "Check home basic contents"
- 上記で定義した共通関数 checkHomeBasicContents(page) を呼び出す

---

### テストケース3
- テストケース名: "Transition to booking step-1 (PC only)"
- mobile プロジェクトの場合は test.skip() する

#### 確認内容
- TestId="main-nav"配下の
  TestId="main-navbar-button-booking" を取得
- ボタンをクリックする
- URLが "/booking/step-1" で終了することを確認する(toHaveURL)

- TestId="booking-step1-title"でロケータを取得
- 以下のテキストが存在すること(toHaveText)

日付・人数を選択してください

---

### テストケース4
- テストケース名: "Save screenshot"
- testInfo.project.name に応じてファイル名のサフィックスを切り替える
  - mobile の場合: "Mobile"
  - それ以外: "Main"

- ファイル名フォーマット:
  homeNav{suffix}.png

- 以下の処理を順に実行する
  - captureEvidenceScreenshot(page, filename)
  - compareWithSnapshot(page, filename)

---

## 指示事項
生成したプログラムは以下のディレクトリに以下のファイル名で保存すること。

directory: tests  
filename: home_nav.spec.ts

# Prerequisites

## テスト共通事項
- 上記の条件に基づき、ホーム画面のPlaywright用テストプログラムを作成する
- プログラムの解説や補足説明は不要。プログラムのみを生成すること

- テストコードの先頭に以下の import を記述すること

import { Page } from "@playwright/test";
import { test, expect } from "./base.spec";
import { captureEvidenceScreenshot } from "./screenshot.evidence";
import { compareWithSnapshot } from "./screenshot.snapshot";

- テストグループ名は test.describe() にて指定すること

- テストケースは以下の雛形を元に作成すること

test("テストケース名", async ({ page, testInfo }) => {
  // 各確認処理
}

- ロケーターの取得は TestId を用いて getByTestId() を使用すること

- 各テストケースに await page.goto("/") を記述する必要はない  
  （base.spec.ts 内で遷移処理が行われているため）

- クラス指定の確認(toHaveClass)は、文字列ではなく正規表現(/xxx/)を使用すること

- 文字列の部分一致確認は正規表現を用いて記述すること

- 日本語文字列には Unicode エスケープを含めないこと

## テスト個別事項
- 特になし

